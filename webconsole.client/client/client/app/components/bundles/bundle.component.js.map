{"version":3,"sources":["app/components/bundles/bundle.component.ts"],"names":[],"mappings":"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","file":"app/components/bundles/bundle.component.js","sourcesContent":["import {Component, OnInit, ElementRef} from '@angular/core';\nimport {FORM_DIRECTIVES, FormBuilder, NgFor, NgFormModel} from '@angular/common';\nimport {ROUTER_DIRECTIVES, RouteParams, Router} from \"@angular/router-deprecated\";\nimport {HTTP_PROVIDERS} from '@angular/http';\n\nimport {BackendServices} from '../../services/backend.service';\nimport {Bundle} from '../../domain/bundle';\nimport {Tabs} from '../../components/tabs';\nimport {Tab} from '../../components/tab';\n\nimport {KeyValue} from '../../domain/keyValue';\nimport {ImportPackage} from '../../domain/importPackage';\nimport {Service} from '../../domain/service';\n\nimport {NewlinePipe} from '../../pipes/newline.pipe';\nimport {ValuesPipe} from '../../pipes/values.pipe';\nimport {BundleStatePipe} from '../../pipes/bundleState.pipe';\n\n@Component({\n    selector: 'bundle',\n    directives: [FORM_DIRECTIVES, NgFor, NgFormModel, Tabs, Tab],\n    providers: [BackendServices, HTTP_PROVIDERS],\n    pipes: [NewlinePipe, ValuesPipe, BundleStatePipe],\n    templateUrl: 'app/html/bundles/bundle.template.html',\n    //styleUrls:  ['app/js/datatables.css']\n})\nexport class BundleComponent implements OnInit {\n\n    bundle: Bundle = new Bundle();\n\n    capabilities: KeyValue[] = [];\n\n    isLoading = true;\n\n    constructor(private _routeSegment: RouteParams, private _backend: BackendServices, private _router: Router) {\n        _backend.setBaseUrl('http://localhost:2002/');\n    }\n\n    ngOnInit() {\n        let id = this._routeSegment.get('id');\n\n        this._backend.getBundle(id)\n            .subscribe(res => {\n                this.bundle = res;\n                var props = <Map<string, string>>res.wireDescriptor.capabilities;\n                for (var key in props) {\n                    if (key == \"attributes\") {\n                        var attributes = <Map<string, string>>props[key];\n                        var attributeMap: KeyValue[];\n                        for (var attribute in attributes) {\n                            attributeMap.push(new KeyValue(attribute, attributes[attribute]));\n                        }\n                        this.capabilities.push(new KeyValue(key, attributeMap));\n                    } else {\n                        this.capabilities.push(new KeyValue(key, props[key]));\n                    }\n                };\n\n                this._backend.getBundleServices(this.bundle.id)\n                    .subscribe(serviceRes => {\n                        this.bundle.providedServices = serviceRes;\n                    });\n\n\n                this.isLoading = false;\n            }\n            );\n    }\n\n    exportedPackagesTitle() {\n        return \"Exported Packages (\" + this.bundle.exportPackage.length + \")\";\n    }\n\n    importedPackagesTitle() {\n        //                return \"<span class='glyphicon glyphicon-log-in' aria-hidden='true' style='color: blue'> Imported Packages (\" + this.bundle.importPackage.length + \")\";\n        return \"Imported Packages (\" + this.bundle.importPackage.length + \")\";\n    }\n\n    providedServicesTitle() {\n        var providedServicesCount = 0;\n        if (this.bundle.providedServices != null) {\n            providedServicesCount = this.bundle.providedServices.length;\n        }\n        return \"Provided Services (\" + providedServicesCount + \")\";\n    }\n\n    getImportPackageClass(pkg: ImportPackage) {\n        if (pkg.packageResolvingCandidates && pkg.packageResolvingCandidates.length == 0 && pkg.resolution == \"MANDATORY\") {\n            return \"problem\";\n        }\n        return \"\";\n    }\n\n    onSelectService(service: Service) {\n        this._router.navigate(['Service', { id: service.id }]);\n        //this._breadcrumbService.add(new Breadcrumb(['Bundle'], \"hier\"));\n    }\n\n    onSelectBundle(id: string) {\n        this._router.navigate(['Bundle', { id: id }]);\n    }\n\n    objToStrMap(obj) {\n        let strMap = new Map();\n        for (let k of Object.keys(obj)) {\n            strMap.set(k, obj[k]);\n        }\n        return strMap;\n    }\n}\n"],"sourceRoot":"/source/"}