{"version":3,"sources":["app/components/bundles/bundle.component.ts"],"names":[],"mappings":"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","file":"app/components/bundles/bundle.component.js","sourcesContent":["import {Component, OnInit, ElementRef} from '@angular/core';\r\nimport {FORM_DIRECTIVES, FormBuilder, NgFor, NgFormModel} from '@angular/common';\r\nimport {ROUTER_DIRECTIVES, Router, ActivatedRoute} from \"@angular/router\";\r\nimport {HTTP_PROVIDERS} from '@angular/http';\r\n\r\nimport {BackendServices} from '../../services/backend.service';\r\nimport {AppGlobals} from '../../services/appglobals.service';\r\nimport {BreadcrumbsService} from '../../services/breadcrumbs.service';\r\n\r\nimport {Bundle} from '../../domain/bundle';\r\nimport {Breadcrumb} from '../navbar/breadcrumb';\r\n\r\nimport {Tabs} from '../../components/tabs';\r\nimport {Tab} from '../../components/tab';\r\n\r\nimport {KeyValue} from '../../domain/keyValue';\r\nimport {ImportPackage} from '../../domain/importPackage';\r\nimport {Service} from '../../domain/service';\r\n\r\nimport {NewlinePipe} from '../../pipes/newline.pipe';\r\nimport {ValuesPipe} from '../../pipes/values.pipe';\r\nimport {LinkPipe} from '../../pipes/link.pipe';\r\nimport {BundleStatePipe} from '../../pipes/bundleState.pipe';\r\n\r\n@Component({\r\n    selector: 'bundle',\r\n    directives: [FORM_DIRECTIVES, NgFor, NgFormModel, Tabs, Tab],\r\n    providers: [BackendServices, HTTP_PROVIDERS],\r\n    pipes: [NewlinePipe, ValuesPipe, BundleStatePipe,LinkPipe],\r\n    templateUrl: 'app/html/bundles/bundle.template.html',\r\n    //styleUrls:  ['app/js/datatables.css']\r\n})\r\nexport class BundleComponent implements OnInit {\r\n\r\n    bundle: Bundle = new Bundle();\r\n\r\n    capabilities: KeyValue[] = [];\r\n\r\n    private sub: any;\r\n\r\n    constructor(\r\n        private _backend: BackendServices, \r\n        private _route: ActivatedRoute, \r\n        private _router: Router, \r\n        private _breadcrumbsService: BreadcrumbsService,\r\n        private _appGlobals: AppGlobals) {\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.sub = this._route.params.subscribe(params => {\r\n            let id = params['id']; \r\n\r\n            this._breadcrumbsService.add(new Breadcrumb(['/bundles'],'thetitle'));\r\n\r\n            this._backend.getBundle(id)\r\n            .subscribe(res => {\r\n                this._appGlobals.setIsLoading(true);\r\n                this.bundle = res;\r\n                var props = <Map<string, string>>res.wireDescriptor.capabilities;\r\n                for (var key in props) {\r\n                    if (key == \"attributes\") {\r\n                        var attributes = <Map<string, string>>props[key];\r\n                        var attributeMap: KeyValue[];\r\n                        for (var attribute in attributes) {\r\n                            attributeMap.push(new KeyValue(attribute, attributes[attribute]));\r\n                        }\r\n                        this.capabilities.push(new KeyValue(key, attributeMap));\r\n                    } else {\r\n                        this.capabilities.push(new KeyValue(key, props[key]));\r\n                    }\r\n                };\r\n\r\n                this._backend.getBundleServices(this.bundle.id)\r\n                    .subscribe(serviceRes => {\r\n                        this.bundle.providedServices = serviceRes;\r\n                    });\r\n                this._appGlobals.setIsLoading(false);\r\n            }\r\n            );\r\n        });\r\n\r\n        \r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.sub.unsubscribe();\r\n    }\r\n\r\n\r\n    exportedPackagesTitle() {\r\n        return \"Exp. Pkgs. (\" + this.bundle.exportPackage.length + \")\";\r\n    }\r\n\r\n    importedPackagesTitle() {\r\n        //                return \"<span class='glyphicon glyphicon-log-in' aria-hidden='true' style='color: blue'> Imported Packages (\" + this.bundle.importPackage.length + \")\";\r\n        return \"Imp. Pkgs. (\" + this.bundle.importPackage.length + \")\";\r\n    }\r\n\r\n    providedServicesTitle() {\r\n        var providedServicesCount = 0;\r\n        if (this.bundle.providedServices != null) {\r\n            providedServicesCount = this.bundle.providedServices.length;\r\n        }\r\n        return \"Provided Services (\" + providedServicesCount + \")\";\r\n    }\r\n\r\n    getImportPackageClass(pkg: ImportPackage) {\r\n        if (pkg.packageResolvingCandidates && pkg.packageResolvingCandidates.length == 0 && pkg.resolution == \"MANDATORY\") {\r\n            return \"problem\";\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    onSelectService(service: Service) {\r\n        this._router.navigate(['/services',service.id]);\r\n    }\r\n\r\n    onSelectBundle(id: string) {\r\n        this._router.navigate(['/bundles', id ]);\r\n    }\r\n\r\n    objToStrMap(obj) {\r\n        let strMap = new Map();\r\n        for (let k of Object.keys(obj)) {\r\n            strMap.set(k, obj[k]);\r\n        }\r\n        return strMap;\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}