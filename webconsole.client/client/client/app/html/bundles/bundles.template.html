<h2><i class="fa fa-th-large" aria-hidden="true" style="color: green"></i> Bundles <small>({{filteredCount}} of {{bundles?.length}})</small></h2>

<div *ngIf="isShown('help_bundles')" class="alert alert-warning alert-dismissible fade in" role="alert" style="font-size:small">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="hidePermanently('help_bundles')"><span aria-hidden="true">&times;</span></button>
  <strong>Bundles</strong> are the building blocks in an OSGi environment.
</div>

<tabs>
  <tab [tabTitle]="'Bundles Overview'">
    <table class="table table-hover" style="table-layout: fixed; width=100%;white-space: nowrap;">
      <thead>
        <tr>
          <th class="text-xs-right" style="width:50px;">ID</th>
          <th>SymbolicName <input type="text" name="search_name" size="20" style="border: 0px solid gray;"
              [(ngModel)]="searchName" /> <i class="fa fa-search" aria-hidden="true"></i></th>
          <th style="width:120px;"># prov. Serv.</th>
          <th style="width:120px;"># used Serv.</th>
          <th style="width:200px;">Version</th>
          <th style="width:100px;">Status</th>
          <th style="width:120px;">Size (KB)</th>
        </tr>
      </thead>
      <tr *ngFor="let bundle of (bundles | bundlesFilter:searchName)">
        <td>{{bundle.id}}</td>
        <td (click)="onSelect(bundle)" style="cursor: pointer; color:#000066;">{{bundle.symbolicName}}</td>
        <td>{{bundle.registeredServiceIds.length}}</td>
        <td>{{bundle.usedServiceIds.length}}</td>
        <td>{{bundle.version}}</td>
        <td [innerHtml]="bundle.state | bundleState"></td>
        <td><span [d3PercentBar]='bundle.size' [d3MaxValue]='maxSize' [d3MaxWidth]='100' class="chart" title="{{bundle.size}} KB"></span></td>
      </tr>
    </table>
  </tab>

  <tab [tabTitle]="'Adjacency Matrix'">
    <div id="vizcontainer">
      <svg style="width:1000px;height:1000px;border:1px lightgray solid;" adjacency />
    </div>
  </tab>

  <tab [tabTitle]="getBarChartTitle('Service Dependencies')">
    Show System Bundle: <input type=checkbox id="showSystemBundle">
    <div>
      <svg id="d3serviceDep" style="width:1000px;height:600px;border:0px #bfbfbf solid;" d3serviceDep />
    </div>
  </tab>

  <tab [tabTitle]="getBarChartTitle('Package Dependencies')">
    Show System Bundle: <input type=checkbox id="showSystemBundle">
    <div>
      <svg id="d3pkgDep" style="width:1000px;height:600px;border:0px #bfbfbf solid;" d3PkgDep />
    </div>
  </tab>

  <tab [tabTitle]="getBarChartTitle('Size Distribution')">
    <div>
      <svg id="d3BundleSizes" style="width:1000px;height:600px;border:0px #bfbfbf solid;" d3BundleSizes />
    </div>
  </tab>
</tabs>