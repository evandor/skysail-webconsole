{"version":3,"sources":["app/services/backend.service.ts"],"names":[],"mappings":"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","file":"app/services/backend.service.js","sourcesContent":["import {Injectable, OnInit} from '@angular/core'\r\nimport {Http, Headers, RequestOptions} from '@angular/http'\r\nimport {Observable} from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/map';\r\n\r\nimport {Bundle} from '../domain/bundle';\r\nimport {ExportPackage} from '../domain/exportPackage';\r\nimport {LogEntry} from '../domain/logEntry';\r\nimport {Service} from '../domain/service';\r\nimport {Snapshot} from '../domain/snapshot';\r\nimport {RuntimeConfig} from '../domain/runtimeconfig';\r\n\r\nimport {ConfigService} from '../services/config.service';\r\nimport {AppGlobals} from '../services/appglobals.service';\r\n\r\n\r\n@Injectable()\r\nexport class BackendServices {\r\n\r\n    private _baseUrl = '';\r\n    headers = new Headers();\r\n\r\n    constructor(private _http: Http, private _appGlobals: AppGlobals) {\r\n        //console.log(\"BackendServices constructor\");\r\n        _appGlobals._backendUrl.subscribe(value => this._baseUrl = value);\r\n        console.log(\"base url set to '\" + this._baseUrl + \"'\");\r\n        if (this._baseUrl == \"http://undefined:undefined/\") {\r\n            this._baseUrl = \"http://localhost:2002/\";\r\n            console.log(\"base url undefined, setting back to default \" + this._baseUrl);\r\n        }\r\n        this.headers.append('Authorization', 'Basic d2ViY29uc29sZTp3ZWJjb25zb2xl');\r\n        this.headers.append('Access-Control-Allow-Origin','*');\r\n    }\r\n\r\n    get(path) {\r\n        var headers = new Headers();\r\n        headers.append('Authorization', 'Basic d2Vic29uc29sZTp3ZWJzb25zb2xl');\r\n        return this._http.get(this._baseUrl + path, { headers: headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getFramework(): Observable<any> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/framework', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getBundles(): Observable<Bundle[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/bundles', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getBundle(id): Observable<Bundle> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/bundles/' + id, { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getBundleServices(id): Observable<Service[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/bundles/' + id + \"/services\", { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getBundleContents(id): Observable<Bundle> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/bundles/' + id + \"/contents\", { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getBundleFileContents(id: string, filename: string): Observable<string> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/bundles/' + id + \"/contents/\" + filename, { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getServices(): Observable<Service[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/services', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getService(id): Observable<Service> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/services/' + id, { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getPackages(): Observable<ExportPackage[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/packages', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getMatchingPackages(part: string): Observable<ExportPackage[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/packages/' + part, { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getLogs(): Observable<LogEntry[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/logs', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getSnapshots(): Observable<Snapshot[]> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/snapshots', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    getLatestSnapshot(): Observable<Snapshot> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/snapshotdetails/latest', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n    createSnapshot() {\r\n        return this._http.post(this._baseUrl + 'backend/v1/snapshots/', JSON.stringify(\"create\"), { headers: this.headers })\r\n            //.map(res => res.json())\r\n            ;\r\n    }\r\n\r\n    getVersion() {\r\n        return this._http.get(this._baseUrl + 'backend/v1/client/version', { headers: this.headers })\r\n            .map(res => res.text());\r\n    }\r\n\r\n    getRuntimeConfig(): Observable<RuntimeConfig> {\r\n        return this._http.get(this._baseUrl + 'backend/v1/runtimeconfig', { headers: this.headers })\r\n            .map(res => res.json());\r\n    }\r\n\r\n}"],"sourceRoot":"/source/"}