{"version":3,"sources":["app/components/bundles/bundles.component.ts"],"names":[],"mappings":"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","file":"app/components/bundles/bundles.component.js","sourcesContent":["import {Component, OnInit, ElementRef, ChangeDetectionStrategy, OnChanges, Input, Output, EventEmitter} from '@angular/core';\r\nimport {FORM_DIRECTIVES, FormBuilder, NgFor, NgFormModel} from '@angular/common';\r\nimport {ROUTER_DIRECTIVES, Router} from \"@angular/router\";\r\n\r\nimport {BackendServices} from '../../services/backend.service';\r\nimport {BreadcrumbsService} from '../../services/breadcrumbs.service';\r\nimport {AppGlobals} from '../../services/appglobals.service';\r\n\r\nimport {Breadcrumb} from '../../components/navbar/breadcrumb';\r\nimport {Bundle} from '../../domain/bundle';\r\nimport {Tabs} from '../../components/tabs';\r\nimport {Tab} from '../../components/tab';\r\nimport {SubTab} from '../../components/subtab';\r\nimport {InlineHelp} from '../../components/inlinehelp.component';\r\n\r\nimport {BundleStatePipe} from '../../pipes/bundleState.pipe';\r\nimport {BundlesFilter} from '../../pipes/bundlesFilter.pipe'\r\n\r\nimport {PercentBarDirective} from '../../directives/percentBar.d3.directive'\r\nimport {AdjacencyDirective} from '../../directives/adjacency.directive'\r\nimport {D3PkgDepDirective} from '../../directives/d3pkgDep.directive'\r\nimport {D3ServiceDepDirective} from '../../directives/d3serviceDep.directive'\r\nimport {D3BundleSizesDirective} from '../../directives/d3bundlesizes.directive'\r\n\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n    selector: 'bundles',\r\n    directives: [FORM_DIRECTIVES, ROUTER_DIRECTIVES, NgFor, NgFormModel, Tabs, Tab, SubTab, InlineHelp, AdjacencyDirective, D3PkgDepDirective,\r\n        D3ServiceDepDirective,\r\n        D3BundleSizesDirective, PercentBarDirective],\r\n    providers: [BackendServices],\r\n    templateUrl: 'app/html/bundles/bundles.template.html',\r\n    pipes: [BundlesFilter, BundleStatePipe],\r\n})\r\nexport class BundlesComponent implements OnInit, OnChanges {\r\n\r\n    bundles: Bundle[];\r\n    searchId: string = \"\";\r\n    public searchName: string = '';\r\n    filteredCount: number = 0;\r\n\r\n    bundleIdList: string[] = [];\r\n\r\n    value: number;\r\n    maxSize: number = 0;\r\n    size: number;\r\n\r\n    hidePageHelpFor: string = '';\r\n\r\n    constructor(private router: Router, private _backend: BackendServices, private _breadcrumbService: BreadcrumbsService, private _appGlobals: AppGlobals) {\r\n        _appGlobals._filteredCount.subscribe(value => this.filteredCount = value);\r\n        this.hidePageHelpFor = localStorage.getItem('pageHelpBundles');\r\n        if (this.hidePageHelpFor == null) {\r\n            this.hidePageHelpFor = '';\r\n        }\r\n    }\r\n\r\n    onSelect(bundle: Bundle) {\r\n        this.router.navigate(['/bundles', bundle.id]);\r\n        this._breadcrumbService.add(new Breadcrumb(['bundle'], \"hier\"));\r\n    }\r\n\r\n    ngOnInit() {\r\n        this._appGlobals.setIsLoading(true);\r\n        this._backend.getBundles()\r\n            .subscribe(res => {\r\n                this.bundles = res;\r\n                err => this.logError(err);\r\n                this.bundles.forEach(bundle => {\r\n                    this.bundleIdList.push(bundle.id);\r\n                    if (bundle.size > this.maxSize) {\r\n                        this.maxSize = bundle.size;\r\n                    }\r\n                });\r\n                this._appGlobals.setBundleIdList(this.bundleIdList);\r\n                this._appGlobals.setIsLoading(false);\r\n            });\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        console.log(\"hier:\" + changes);\r\n    }\r\n\r\n    getBarChartTitle(title: string) {\r\n        return \"<i class='fa fa-bar-chart'></i> \" + title;\r\n    }\r\n\r\n    clicked() {\r\n        console.log(\"clicked\");\r\n    }\r\n\r\n    logError(err) {\r\n        console.error('There was an error: ' + err);\r\n    }\r\n\r\n    getPercentChartSpanId(id: string) {\r\n        return \"chartSpanId_\" + id;\r\n    }\r\n\r\n    setData(value, max, size) {\r\n        this.value = value;\r\n        this.maxSize = max;\r\n        this.size = size;\r\n    }\r\n    \r\n    isShown(id: string):boolean {\r\n        var str = localStorage.getItem('pageHelpBundles') as string;\r\n        if (str == null) {\r\n            return true;\r\n        }\r\n        return (str.indexOf(\",\"+id) === -1);\r\n    }\r\n\r\n    hidePermanently(id: string) {\r\n        this.hidePageHelpFor += \",\"+id;\r\n        localStorage.setItem('pageHelpBundles', this.hidePageHelpFor);\r\n        //this.pageHelp.set('show_' + id, false);\r\n    }\r\n\r\n    showAllInlineHelp() {\r\n        this.hidePageHelpFor = '';\r\n        localStorage.removeItem('pageHelpBundles');\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}